<h1 id="value">value</h1>
<p>Internally <a href="node.html">node</a>s have a field <code>value</code>.</p>
<p>It is used to hold primitive raw data and the value node of
<a href="key.html">key</a>-value <a href="pair.html">pair</a>s.</p>
<h2 id="implementation-details">Implementation details:</h2>
<pre><code>union Value {
    Node *node = 0;
    String *string;
    void *data;// any bytes
    double real;
    long longy;
//  codepoint chary;// use longy</code></pre>
<p>Number types such as <a href="bool.html">bool</a> <a href="byte.html">byte</a> <a href="int.html">int</a> are using the same
longy slot. Upon emission to wasm, these may or may not be reduced to
i32 or i8; for example when handling arrays.</p>
<p>The <a href="type.html">type</a> of the value struct corresponds to the internal <a href="kind.html">kind</a>
of the node:</p>
<pre><code>enum Type {// todo: merge Node.kind with Node.class(?)
    // plurals because of namespace clash
    nils = 0,
    objects, // {…} block data with children closures
    groups, // (…) meta params parameter attributes lists
    patterns, // […] selectors matches, annotations! [public export extern] function mul(x,y){x*y}
    key, // key with value
    reference, // variable identifier name x
    symbol, // one / plus / Jesus
    operators, // TODO: semantic types don&#39;t belong here! they interfere with internal structural types key etc!!
    functor, // while(xyz){abc} takes 1?/2/3 blocks if {condition} {then} {else}
    expression, // one plus one
    declaration, // x:=1
    assignment, // x = 1 // really?? needs own TYPE?
    strings,
    codepoint1,
    arrays, // Node[] vs any[]? vs
    buffers, // int[]
    reals,
    longs, // the signature of parameters/variables is independent!
    //  ints, // use longy field, but in wasm longs are pointers!
    bools,
    errors, // internal wasp error, NOT to be used in Angle!
    call,
    classe, // as Java class,  primitive int vs Node(kind==int) == boxed IntegerType
    unknown //
}</code></pre>
<p>The internal value <a href="type.html">type</a> known as node “kind” corresponds losely
with the node “type” which is a pointer to another node. Example
pseudocode:</p>
<pre><code>node{
    value.longy=1
    kind=longs,
    type=BoolType
}
node{
    value.longy=1
    kind=longs,
    type=Integer
}</code></pre>
